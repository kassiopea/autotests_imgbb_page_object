# Пример автотестов для сайта Imgbb 

## Ресурс imgbb.com

### Технологии и инструменты
* Selenium
* Python 3
* Pytest

Перед запуском тестов можно выбрать браузер, в котором будут запускаться тесты:
```
--browser
```
и язык интерфейса:

```
--language
```
### Запуск тестов
#### Локально в ветке tests_local

- Установить python
- Установить pip3
- Скачать и добавить в дефолтную директорию chromebrowser 
(если планируется запускать с другими браузерами, поместить их в ту же дефолтную директорию)
- Активировать виртуальное окружение, например, командой ``` source test/bin/activate ```
- Установить зависимости ``` pip install -r requirements.txt ```
- Запустить docker compose с allure (сохраняет историю прогонов) ``` docker-compose up -d ```
- Запустить все тесты с указанием папки для репортов 
``` pytest tests/*page.py --alluredir=./allure/allure-results --browser=firefox --language="en" ```
- Посмотреть результаты прогона можно по ссылке ``` http://localhost:5252/allure-docker-service-ui/ ```
- Остановить докер ``` docker-compose down ```


#### В docker selenium grid в ветке tests_docker
- Установить python
- Установить pip3
- Активировать виртуальное окружение, например, командой ``` source test/bin/activate ```
- Установить зависимости ``` pip install -r requirements.txt ```
- Зпустить docker-compose с помощью команды ``` docker-compose up -d ```
- Запустить тесты с указанием директории для allure отчетов, например, 
``` pytest tests/*page.py --alluredir=./allure/allure-results --browser=chrome --language=ru ```
- Посмотреть прогон тестов UI можно по ссылке 
``` http://localhost:5252/allure-docker-service-ui/ ```
- Остановить docker-compose командой ``` docker-compose down ```

#### Тесты
##### Главная страница
* Неавторизованный пользователь
    * пользователь может перейти с главной страницы на страницу авторизации
    * пользователь видит форму авторизации на странице
* Новый/незарегестрированный пользователь
    * может перейти с главной страницы на страницу регистрации
    * видит форму регистрации на странице
* Неавторизованный пользователь на главной странице
    * может открыть попап для загрузки файлов
    * видит ссылки на загрузку файлов
    * может добавить валидный файл для загрузки
    * может загрузить валидный файл
* Авторизованный пользователь на главной странице
    * может загрузить валидный файл
    
##### Страница пользовательского профиля
* Авторизованный пользователь
    * может загрузить файл со строницы профиля
    * может загрузить все файлы с валидным расширением
    * не может загрузить файлы с невалидным расширением